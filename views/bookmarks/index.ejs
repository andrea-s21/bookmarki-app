<%- include('../partials/header') %>

    <h2> My Bookmarks</h2>
    <% categories.forEach(function(c) { %>
        <section>
            <h3><%= c %> </h3>
            <% var filteredBookmarks = bookmarks.filter(b => b.category === c) %> 
            <% if (filteredBookmarks.length) { %> 
                <% filteredBookmarks.forEach(function(b) { %>
                    <article>
                        <div><%= b.title %> </div>
                        <div><%= b.description %> </div>
                        <div><%= b.url %> </div>
                        <div><%= b.category %> </div>
                    </article>
                <% }) %> 
            <% } else { %> 
                <div>No bookmarks for this category.</div>
            <% } %> 
        </section>
    <% }) %> 










    <table>
        <thead>
            <tr>
                <th>Title &nbsp;&nbsp;&nbsp;</th>
                <th>Description &nbsp;&nbsp;&nbsp;</th>
                <th>URL&nbsp;&nbsp;&nbsp;</th>
                <th>Category&nbsp;&nbsp;&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            <% bookmarks.forEach(function(b) { %>
                <% if (user._id.toString()===b.user._id.toString()) { %>

                    <tr>
                        <td>
                            <%= b.title %>
                        </td>
                        <td>
                            <%= b.description %>
                        </td>
                        <td>
                            <%= b.url %>
                        </td>
                        <td>
                            <%= b.category %>
                        </td>
                        <td>
                            <a href="/bookmarks/<%= b._id  %> ">View Bookmark</a>
                        </td>
                    </tr>
                    <form action="/bookmarks/<%= b._id %>?_method=DELETE" method="POST">
                        <input type="submit" name="" value="Delete Bookmark">
                    </form>
                    <!-- Close the forEach using EJS here -->
                    <% } %>
                        <% }); %>
        </tbody>
    </table>

    <%- include('../partials/footer') %>